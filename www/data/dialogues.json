{
  "npc_one_eyed_jack": {
    "jack_start": {
      "id": "jack_start",
      "npcText": "Arr, what brings ye to Tortuga, matey? Don't be shy, speak yer mind or be on yer way!",
      "playerChoices": [
        {
          "text": "Just looking around, seeing the sights.",
          "nextNodeId": "jack_look_around",
          "action": null
        },
        {
          "text": "Heard any good rumors worth a pirate's ear?",
          "nextNodeId": "jack_rumors",
          "action": null
        },
        {
          "text": "I'm looking for adventure... and treasure!",
          "nextNodeId": "jack_adventure",
          "action": null
        },
        {
          "text": "Tell me a funny story, pirate.",
          "nextNodeId": "jack_funny_story_start",
          "action": null
        },
        {
          "text": "That's quite an eyepatch. Story behind it?",
          "nextNodeId": "jack_eyepatch_story",
          "action": null
        }
      ]
    },
    "jack_look_around": {
      "id": "jack_look_around",
      "npcText": "Tortuga's got sights aplenty, that's for sure. Just keep yer wits about ye, and yer coin purse hidden. Not everyone here plays nice.",
      "playerChoices": [
        {
          "text": "Thanks for the advice.",
          "nextNodeId": "END",
          "action": null
        }
      ]
    },
    "jack_rumors": {
      "id": "jack_rumors",
      "npcText": "Rumors, ye say? Aye, the sea be full o' them, like barnacles on an old hull. Most are as empty as a looted treasure chest, but some... some whisper of islands that appear only in the densest fog, guarded by creatures from the deep. Reckon those are best left to the imagination, eh?",
      "playerChoices": [
        {
          "text": "Perhaps you're right.",
          "nextNodeId": "END",
          "action": null
        },
        {
          "text": "Sounds like a challenge!",
          "nextNodeId": "jack_challenge_accepted",
          "action": null
        }
      ]
    },
    "jack_adventure": {
      "id": "jack_adventure",
      "npcText": "Adventure and treasure, the lifeblood of any true pirate! This town's a good start, but the real riches lie beyond the horizon. Keep an eye out for old maps, and don't trust a soul further than ye can throw 'em.",
      "playerChoices": [
        {
          "text": "Solid advice, thank you.",
          "nextNodeId": "END",
          "action": null
        },
        {
          "text": "Heard of any legendary treasures still out there?",
          "nextNodeId": "jack_legendary_treasure",
          "action": null
        }
      ]
    },
    "jack_challenge_accepted": {
      "id": "jack_challenge_accepted",
      "npcText": "Heh, a bold one, are ye? That spirit might serve ye well, or get ye killed. Time will tell. Now, be off with ye, I've got important... pirate business to attend to.",
      "playerChoices": [
        {
          "text": "Farewell, Jack.",
          "nextNodeId": "END",
          "action": null
        }
      ]
    },
    "jack_funny_story_start": {
      "id": "jack_funny_story_start",
      "npcText": "A funny story, eh? Alright, settle down. Reminds me of this one time, I had a parrot, see? Smartest bird I ever knew. Went into a tavern, and the blasted thing hops on the bar and squawks, 'A keg o' rum for me captain, and a cracker for me!' So the barkeep says...",
      "playerChoices": [
        {
          "text": "And what did the barkeep say?",
          "nextNodeId": "jack_parrot_punchline",
          "action": null
        },
        {
          "text": "That's not very funny yet.",
          "nextNodeId": "jack_skeptical",
          "action": null
        }
      ]
    },
    "jack_skeptical": {
      "id": "jack_skeptical",
      "npcText": "Hold yer seahorses, I'm gettin' to the good part! Patience, lad/lass, patience. A good story is like a fine grog, needs time to be savored.",
      "playerChoices": [
        {
          "text": "Alright, alright, go on.",
          "nextNodeId": "jack_parrot_punchline",
          "action": null
        }
      ]
    },
    "jack_parrot_punchline": {
      "id": "jack_parrot_punchline",
      "npcText": "The barkeep, he looks at the parrot, then at me, then back at the parrot and says, 'That'll be ten gold pieces for the rum. The cracker's on the house for the bird, but he better not try to pay with doubloons he's... *found*.' Har har! Turns out the parrot had been swipin' coins from the collection plate at the church!",
      "playerChoices": [
        {
          "text": "Hah! That's a good one!",
          "nextNodeId": "jack_laugh_end",
          "action": null
        },
        {
          "text": "Got any more like that?",
          "nextNodeId": "jack_parrot_another",
          "action": null
        }
      ]
    },
    "jack_laugh_end": {
      "id": "jack_laugh_end",
      "npcText": "Aye, gets 'em every time. Now, if ye'll excuse me, I've got a thirst that needs quench'n'.",
      "playerChoices": [
        {
          "text": "See you around, Jack.",
          "nextNodeId": "END",
          "action": null
        }
      ]
    },
    "jack_parrot_another": {
      "id": "jack_parrot_another",
      "npcText": "Afraid that's the only one fit for polite company, matey. The rest are a bit too... *piratey*, if ye catch my drift. Maybe another time, eh?",
      "playerChoices": [
        {
          "text": "Understood. Thanks for the story!",
          "nextNodeId": "END",
          "action": null
        }
      ]
    },
    "jack_eyepatch_story": {
      "id": "jack_eyepatch_story",
      "npcText": "This old thing? Lost it to a kraken's caress off the Serpent's Spine. Took me eye, but I took its treasure! Every scar tells a tale, eh?",
      "playerChoices": [
        {
          "text": "A kraken! Sounds thrilling.",
          "nextNodeId": "END",
          "action": null
        }
      ]
    },
    "jack_legendary_treasure": {
      "id": "jack_legendary_treasure",
      "npcText": "Aye, whispers of Captain Blackheart's hoard on Phantom Isle. They say it's guarded by his ghostly crew, and the island itself only appears under a blood moon. Many have sought it, none have returned... with the loot, anyway.",
      "playerChoices": [
        {
          "text": "Fascinating. Maybe I'll look into it.",
          "nextNodeId": "END",
          "action": null
        }
      ]
    }
  },
  "npc_captain_isabella_moreau": {
    "moreau_start": {
      "id": "moreau_start",
      "npcText": "Well, well, what have we here? Another stray lamb looking for a wolf in sheep's clothing, or do you actually have business with Captain Moreau?",
      "playerChoices": [
        {
          "text": "Just looking for passage, Captain.",
          "nextNodeId": "moreau_passage",
          "action": null
        },
        {
          "text": "I've heard you're a captain who gets things done.",
          "nextNodeId": "moreau_reputation",
          "action": null
        },
        {
          "text": "Heard any whispers about 'The Crimson Marauders'?",
          "nextNodeId": "moreau_crimson_marauders_intro",
          "action": null
        },
        {
          "text": "Heard you might have a sensitive problem needing discretion?",
          "nextNodeId": "moreau_spy_investigation_intro",
          "condition": {"questStatus": {"questId": "MOREAU_TORTUGA_SPY_QUEST", "status": "available"}}
        }
      ]
    },
    "moreau_passage": {
      "id": "moreau_passage",
      "npcText": "Passage, eh? My ship, 'The Sea Serpent,' isn't a charity. What makes you worth the space and rations?",
      "playerChoices": [
        {
          "text": "I'm resourceful and can pull my weight.",
          "nextNodeId": "END",
          "action": null
        },
        {
          "text": "Perhaps some information would be worth my passage?",
          "nextNodeId": "moreau_info_for_passage",
          "action": null
        }
      ]
    },
    "moreau_reputation": {
      "id": "moreau_reputation",
      "npcText": "That I am. I don't waste time, and I don't suffer fools. So, what is it you need 'done'?",
      "playerChoices": [
        {
          "text": "I'm seeking information about a legendary treasure.",
          "nextNodeId": "moreau_legendary_treasure_query",
          "action": null
        },
        {
          "text": "Actually, I was hoping to join your crew.",
          "nextNodeId": "END",
          "action": null
        }
      ]
    },
    "moreau_crimson_marauders_intro": {
      "id": "moreau_crimson_marauders_intro",
      "npcText": "The Crimson Marauders... *her eyes narrow slightly* ...a name I know well. Vicious cutthroats, the lot of them. Why do you ask?",
      "playerChoices": [
        {
          "text": "I'm hunting for a treasure they supposedly hid.",
          "nextNodeId": "moreau_crimson_treasure_hunt",
          "action": null
        },
        {
          "text": "I have a personal score to settle with them.",
          "nextNodeId": "moreau_personal_vendetta_shared",
          "action": null
        },
        {
          "text": "Just curious. They sound dangerous.",
          "nextNodeId": "END",
          "action": null
        }
      ]
    },
    "moreau_info_for_passage": {
      "id": "moreau_info_for_passage",
      "npcText": "Information? It better be good. My ears are open, but my patience is thin.",
      "playerChoices": [
        {
          "text": "I know things about 'The Crimson Marauders' that might interest you.",
          "nextNodeId": "moreau_crimson_marauders_intro",
          "action": null
        }
      ]
    },
    "moreau_legendary_treasure_query": {
      "id": "moreau_legendary_treasure_query",
      "npcText": "Legendary treasures are usually just that - legends. But some legends have teeth. Which one are you chasing?",
      "playerChoices": [
        {
          "text": "The one stolen and hidden by The Crimson Marauders.",
          "nextNodeId": "moreau_crimson_treasure_hunt",
          "action": null
        }
      ]
    },
    "moreau_crimson_treasure_hunt": {
      "id": "moreau_crimson_treasure_hunt",
      "npcText": "Hmph. So, you're another fool chasing Captain Varkos's lost plunder. They say it's enough to make kings weep. The Marauders scattered clues, they say, to taunt anyone brave or stupid enough to follow. What makes you think YOU can find it?",
      "playerChoices": [
        {
          "text": "I'm more resourceful than I look.",
          "nextNodeId": "MOREAU_CRIMSON_PLOT_1",
          "action": null
        },
        {
          "text": "Perhaps you could offer some... guidance? For a share, of course.",
          "nextNodeId": "MOREAU_CRIMSON_PLOT_2",
          "action": null
        }
      ]
    },
    "moreau_personal_vendetta_shared": {
      "id": "moreau_personal_vendetta_shared",
      "npcText": "A personal score, you say? *A flicker of interest in her eyes* We might have something in common then. Tell me more. Perhaps we can help each other.",
      "playerChoices": [
        {
          "text": "They wronged my family. I seek justice.",
          "nextNodeId": "MOREAU_VENDETTA_PLOT_1",
          "action": null
        },
        {
          "text": "It's a long story. Let's just say they owe me.",
          "nextNodeId": "END",
          "action": null
        }
      ]
    },
    "MOREAU_CRIMSON_PLOT_1": {
      "id": "MOREAU_CRIMSON_PLOT_1",
      "npcText": "Resourcefulness is good. But the Marauders are cunning and ruthless. Their clues are likely traps. One such clue speaks of 'the serpent's eye that weeps under the blood moon', found on Isla Perdida. Many have gone, none returned. Be careful if you seek it.",
      "playerChoices": [
        {
          "text": "Thank you for the warning, Captain.",
          "nextNodeId": "END",
          "action": null
        },
        {
          "text": "Perhaps I could try to decipher one of these 'clues'?",
          "nextNodeId": "moreau_cipher_challenge_prompt",
          "action": null
        }
      ]
    },
    "moreau_cipher_challenge_prompt": {
      "id": "moreau_cipher_challenge_prompt",
      "npcText": "Hah, bold! Very well. I intercepted this coded message from a Marauder courier. If you can make sense of it, perhaps you're not just another fool. But be warned, failure might attract unwanted attention.",
      "playerChoices": [
        {
          "text": "Let me see the coded message.",
          "nextNodeId": null,
          "effects": [
            {"type": "TRIGGER_PUZZLE", "puzzleId": "CRIMSON_MAP_CIPHER"},
            {"type": "START_QUEST", "questId": "MOREAU_CRIMSON_MAP_QUEST"}
          ]
        },
        {
          "text": "On second thought, perhaps not now.",
          "nextNodeId": "MOREAU_CRIMSON_PLOT_1"
        }
      ]
    },
    "moreau_cipher_challenge_success": {
      "id": "moreau_cipher_challenge_success",
      "npcText": "Impressive. You've actually deciphered it. There may be hope for you yet. This information could be valuable.",
      "playerChoices": [
        { "text": "Glad I could prove my worth.", "nextNodeId": "END" }
      ]
    },
    "moreau_cipher_challenge_failure": {
      "id": "moreau_cipher_challenge_failure",
      "npcText": "Tch. As I expected, nonsense. These Marauder codes are not for amateurs. Stick to swabbing decks.",
      "playerChoices": [
        { "text": "I'll try harder next time.", "nextNodeId": "END" }
      ]
    },
    "moreau_cipher_challenge_skip": {
      "id": "moreau_cipher_challenge_skip",
      "npcText": "Wise choice. Overconfidence is a quick path to a shallow grave in these waters.",
      "playerChoices": [
        { "text": "Understood, Captain.", "nextNodeId": "END" }
      ]
    },
    "MOREAU_CRIMSON_PLOT_2": {
      "id": "MOREAU_CRIMSON_PLOT_2",
      "npcText": "A share? I like your thinking. The Crimson Marauders operate from a hidden fortress somewhere in the Serpent's Teeth archipelago. They say old Varkos left a map, broken into pieces, each held by one of his lieutenants. Find a piece, and maybe we can talk terms.",
      "playerChoices": [
        {
          "text": "A map piece it is. I'll be back.",
          "nextNodeId": "END",
          "action": null
        }
      ]
    },
    "MOREAU_VENDETTA_PLOT_1": {
      "id": "MOREAU_VENDETTA_PLOT_1",
      "npcText": "Justice... or revenge. The line is thin on these waters. The Marauders have many enemies. Their leader, Captain Vorlag, is said to frequent a particular tavern in Tortuga when he's not at sea. 'The Bloody Anchor.' You might find a lead there... or a knife in your back.",
      "playerChoices": [
        {
          "text": "I'll take my chances. Thank you.",
          "nextNodeId": "END",
          "action": null
        }
      ]
    },
    "moreau_spy_investigation_intro": {
      "id": "moreau_spy_investigation_intro",
      "npcText": "Indeed. I have a rat problem. A spy in Tortuga feeding information to the Royal Navy. This compromises my operations, and I need it dealt with. Think you can handle such a delicate task?",
      "playerChoices": [
        {
          "text": "I'm good at uncovering secrets. Tell me more.",
          "nextNodeId": "moreau_spy_investigation_start"
        },
        {
          "text": "Sounds too risky for me, Captain.",
          "nextNodeId": "END"
        }
      ]
    },
    "moreau_spy_investigation_start": {
      "id": "moreau_spy_investigation_start",
      "npcText": "Alright. I have a few suspects. This requires sharp deduction, not just brute force. Listen carefully...",
      "effects": [
        {"type": "TRIGGER_PUZZLE", "puzzleId": "TORTUGA_SPY_DEDUCTION"},
        {"type": "START_QUEST", "questId": "MOREAU_TORTUGA_SPY_QUEST"}
      ],
      "playerChoices": [
        { "text": "I'm ready. Present the suspects and clues.", "nextNodeId": "END" }
      ]
    },
    "MOREAU_SPY_IDENTIFIED_SUCCESS": {
      "id": "MOREAU_SPY_IDENTIFIED_SUCCESS",
      "npcText": "Excellent work. You've sniffed out the rat. My operations are secure once more, thanks to you. You've earned this.",
      "playerChoices": [
        { "text": "Glad I could be of service, Captain.", "nextNodeId": "END" }
      ]
    },
    "MOREAU_SPY_IDENTIFIED_FAILURE": {
      "id": "MOREAU_SPY_IDENTIFIED_FAILURE",
      "npcText": "Wrong suspect! Or perhaps you took too long... The real spy has slipped through our fingers, and my operations are at greater risk. Disappointing.",
      "playerChoices": [
        { "text": "My apologies, Captain.", "nextNodeId": "END" }
      ]
    }
  },
  "npc_silas_blackwood": {
    "silas_start": {
      "id": "silas_start",
      "npcText": "Welcome, welcome! Silas Blackwood, at your service. You look like someone with discerning taste. Perhaps in the market for something... unique? Or maybe just some valuable information?",
      "playerChoices": [
        {
          "text": "What kind of 'unique' items do you deal in?",
          "nextNodeId": "silas_unique_items"
        },
        {
          "text": "Information is what I seek. About 'The Crimson Marauders'.",
          "nextNodeId": "silas_crimson_ marauders_info"
        },
        {
          "text": "I'm just browsing, Mr. Blackwood.",
          "nextNodeId": "END"
        },
        {
          "text": "Heard you might have a special task for someone capable?",
          "nextNodeId": "silas_check_artifact_quest_availability",
          "condition": {"questStatus": {"questId": "SILAS_CURSED_ARTIFACT_PART", "status": "available"}}
        },
        {
          "text": "About that artifact piece you needed...",
          "nextNodeId": "silas_check_artifact_return",
          "condition": {
            "questStatus": {"questId": "SILAS_CURSED_ARTIFACT_PART", "status": "in_progress"},
            "hasItem": "item_shadow_gem"
          }
        },
        {
          "text": "You mentioned 'unique items'. Are any truly legendary?",
          "nextNodeId": "silas_intro_sunken_star_quest_check",
          "condition": {"questStatus": {"questId": "SILAS_SUNKEN_STAR_AMULET_QUEST", "status": "available"}}
        }
      ]
    },
    "silas_intro_sunken_star_quest_check": {
      "id": "silas_intro_sunken_star_quest_check",
      "npcText": "Legendary, you say? I might just have something that piques your interest. It involves a bit of... legwork, but the rewards could be substantial. Are you intrigued?",
      "playerChoices": [
        { "text": "My interest is piqued. Tell me more, Silas.", "nextNodeId": "silas_intro_sunken_star_quest" },
        { "text": "Perhaps another time. What else do you have?", "nextNodeId": "silas_unique_items" }
      ]
    },
    "silas_intro_sunken_star_quest": {
      "id": "silas_intro_sunken_star_quest",
      "npcText": "It's the Amulet of the Sunken Star, an artifact of considerable power. Alas, it's broken. I need someone... resourceful... to find its three pieces. The first, a Curved Obsidian Shard, is said to lie hidden amongst the fiery rocks of Volcano Island. The second, a Sun-Bleached Coral Fragment, was last seen near the Hidden Lagoon; look for where the water meets ancient stone. Find these two, bring them to me, and I shall provide the third piece, a Humming Pearl only I can procure.",
      "effects": [{"type": "START_QUEST", "questId": "SILAS_SUNKEN_STAR_AMULET_QUEST"}],
      "playerChoices": [
        { "text": "I'll find these pieces for you, Silas.", "nextNodeId": "silas_check_amulet_pieces" }, // Changed to lead to check node
        { "text": "That sounds like a lot of trouble.", "nextNodeId": "END" }
      ]
    },
    "silas_check_amulet_pieces": {
      "id": "silas_check_amulet_pieces",
      "npcText": "Ah, back so soon? Any luck with the amulet pieces?",
      "playerChoices": [
        {
          "text": "I found the Obsidian Shard from Volcano Island.",
          "nextNodeId": "silas_receive_obsidian_shard",
          "condition": { "hasItem": "artifact_piece_1_obsidian", "questInProgress": "SILAS_SUNKEN_STAR_AMULET_QUEST" }
        },
        {
          "text": "I found the Coral Fragment from the Hidden Lagoon.",
          "nextNodeId": "silas_receive_coral_fragment",
          "condition": { "hasItem": "artifact_piece_2_coral", "questInProgress": "SILAS_SUNKEN_STAR_AMULET_QUEST" }
        },
        {
          "text": "I have both the Shard and the Fragment!",
          "nextNodeId": "silas_has_both_pieces_provide_pearl",
          "condition": { "hasItems": ["artifact_piece_1_obsidian", "artifact_piece_2_coral"], "questInProgress": "SILAS_SUNKEN_STAR_AMULET_QUEST" }
        },
        { "text": "Still working on it, Silas.", "nextNodeId": "END" },
        { "text": "I want to talk about something else.", "nextNodeId": "silas_start"} // Allow to go back to main options
      ]
    },
    "silas_receive_obsidian_shard": {
      "id": "silas_receive_obsidian_shard",
      "npcText": "Excellent! This obsidian is just as I envisioned. One step closer. Now, what about the coral fragment?",
      "effects": [{"type": "UPDATE_QUEST_OBJECTIVE", "questId": "SILAS_SUNKEN_STAR_AMULET_QUEST", "objectiveId": "find_obsidian_shard", "isCompleted": true}],
      "playerChoices": [
        {"text": "I'm still looking for the Coral Fragment.", "nextNodeId": "silas_check_amulet_pieces"},
        {"text": "I actually have the Coral Fragment too.", "nextNodeId": "silas_has_both_pieces_provide_pearl", "condition": {"hasItem": "artifact_piece_2_coral"}}
      ]
    },
    "silas_receive_coral_fragment": {
      "id": "silas_receive_coral_fragment",
      "npcText": "Splendid! This coral has the exact markings I was told of. Very good. And the obsidian shard?",
      "effects": [{"type": "UPDATE_QUEST_OBJECTIVE", "questId": "SILAS_SUNKEN_STAR_AMULET_QUEST", "objectiveId": "find_coral_fragment", "isCompleted": true}],
      "playerChoices": [
        {"text": "I'm still looking for the Obsidian Shard.", "nextNodeId": "silas_check_amulet_pieces"},
        {"text": "I actually have the Obsidian Shard too.", "nextNodeId": "silas_has_both_pieces_provide_pearl", "condition": {"hasItem": "artifact_piece_1_obsidian"}}
      ]
    },
    "silas_has_both_pieces_provide_pearl": {
      "id": "silas_has_both_pieces_provide_pearl",
      "npcText": "Magnificent! You've found both the Obsidian Shard and the Coral Fragment! You've proven your worth. As promised, here is the Humming Pearl. With all three pieces, you should now be able to attempt the reassembly. Be careful, it's a delicate process.",
      "effects": [
        {"type": "UPDATE_QUEST_OBJECTIVE", "questId": "SILAS_SUNKEN_STAR_AMULET_QUEST", "objectiveId": "find_obsidian_shard", "isCompleted": true},
        {"type": "UPDATE_QUEST_OBJECTIVE", "questId": "SILAS_SUNKEN_STAR_AMULET_QUEST", "objectiveId": "find_coral_fragment", "isCompleted": true},
        {"type": "ADD_ITEM", "itemId": "artifact_piece_3_pearl"},
        {"type": "UPDATE_QUEST_OBJECTIVE", "questId": "SILAS_SUNKEN_STAR_AMULET_QUEST", "objectiveId": "obtain_humming_pearl", "isCompleted": true}
      ],
      "playerChoices": [
        { "text": "Thank you, Silas. I'll try to assemble it now.", "nextNodeId": "silas_trigger_assembly_prompt" },
        { "text": "I need a moment before I try.", "nextNodeId": "END"}
      ]
    },
    "silas_check_artifact_quest_availability": {
      "id": "silas_check_artifact_quest_availability",
      "npcText": "Sharp ears, I see. Indeed, I have a delicate matter that requires a certain... finesse. Are you interested?",
      "playerChoices": [
        {
          "text": "Tell me more.",
          "nextNodeId": "silas_blackwood_start_quest_artifact"
        },
        {
          "text": "Perhaps another time.",
          "nextNodeId": "silas_start"
        }
      ]
    },
    "silas_blackwood_start_quest_artifact": {
      "id": "silas_blackwood_start_quest_artifact",
      "npcText": "I am searching for a rare component, a Shadow Gem, to complete a rather... potent artifact. It's said to be found in the Sunken Spire. Acquire it for me, and you'll be handsomely rewarded.",
      "playerChoices": [
        {
          "text": "I'll get your Shadow Gem.",
          "nextNodeId": "silas_blackwood_accept_artifact_quest"
        },
        {
          "text": "Sounds dangerous. I'll pass.",
          "nextNodeId": "silas_blackwood_decline_artifact_quest"
        }
      ]
    },
    "silas_blackwood_accept_artifact_quest": {
      "id": "silas_blackwood_accept_artifact_quest",
      "npcText": "Excellent! The Sunken Spire is treacherous, so be wary. The Gem pulses with a faint shadow... you'll know it when you see it. Return it to me, and we'll discuss your reward.",
      "effects": [{"type": "START_QUEST", "questId": "SILAS_CURSED_ARTIFACT_PART"}],
      "playerChoices": [
        {
          "text": "I won't fail you, Silas.",
          "nextNodeId": "END"
        }
      ]
    },
    "silas_blackwood_decline_artifact_quest": {
      "id": "silas_blackwood_decline_artifact_quest",
      "npcText": "A pity. Such opportunities don't come often. Perhaps another time, then.",
      "playerChoices": [
        {
          "text": "Goodbye.",
          "nextNodeId": "END"
        }
      ]
    },
    "silas_check_artifact_return": {
      "id": "silas_check_artifact_return",
      "npcText": "Ah, you've returned! And do I sense the lovely shimmer of a Shadow Gem about your person?",
      "playerChoices": [
        {
          "text": "Indeed. Here is the Shadow Gem you requested.",
          "nextNodeId": "silas_blackwood_return_artifact_part"
        },
        {
          "text": "Not yet, still working on it.",
          "nextNodeId": "END"
        }
      ]
    },
    "silas_blackwood_return_artifact_part": {
      "id": "silas_blackwood_return_artifact_part",
      "npcText": "Magnificent! Just as described. You've done splendidly, my friend. Here is your reward, as promised. And know that you have my gratitude... which can be quite valuable.",
      "effects": [
        {"type": "COMPLETE_QUEST", "questId": "SILAS_CURSED_ARTIFACT_PART"},
        {"type": "REMOVE_ITEM", "itemId": "item_shadow_gem"},
        {"type": "ADD_ITEM", "itemId": "item_cursed_doubloon_pouch"},
        {"type": "ADD_XP", "amount": 75},
        {"type": "ADD_STANDING", "npcId": "npc_silas_blackwood", "amount": 1},
        {"type": "ALIGNMENT_SHIFT", "direction": "evil", "magnitude": "small"}
      ],
      "playerChoices": [
        {
          "text": "Pleasure doing business with you, Silas.",
          "nextNodeId": "END"
        }
      ]
    },
    "silas_unique_items": {
      "id": "silas_unique_items",
      "npcText": "Ah, a person of refinement! I procure artifacts of... questionable origin, charts to places not on any map, and secrets that kings would pay fortunes for. All for a reasonable price, of course. Or perhaps a favor?",
      "playerChoices": [
        {
          "text": "What kind of favors?",
          "nextNodeId": "silas_favors"
        },
        {
          "text": "Let's talk about those secrets. Specifically, about a certain treasure.",
          "nextNodeId": "silas_treasure_secrets"
        },
        {
          "text": "Show me one of these 'questionable' artifacts.",
          "nextNodeId": "silas_artifact_assembly_prompt"
        }
      ]
    },
    "silas_artifact_assembly_prompt": {
      "id": "silas_artifact_assembly_prompt", // This node might be kept for other scenarios or removed if only quest-driven
      "npcText": "Eager, are we? Very well. I recently acquired... or rather, *liberated*... these fragments. They are said to form the Amulet of the Sunken Star. See if you can piece it together. Its value would increase significantly if complete.",
      "playerChoices": [
        {
          "text": "Let me try my hand at assembling it.",
          "effects": [{ "type": "TRIGGER_PUZZLE", "puzzleId": "ANCIENT_ARTIFACT_ASSEMBLY" }]
        },
        {
          "text": "Interesting, but I'm not a craftsman.",
          "nextNodeId": "silas_unique_items"
        }
      ]
    },
    "silas_artifact_assembly_prompt_conditional": {
      "id": "silas_trigger_assembly_prompt",
      "npcText": "You have all three pieces of the Sunken Star Amulet. The moment of truth. Are you ready to attempt the reassembly? Remember, it requires a keen eye and a steady hand.",
      "condition": { // This condition could also be on the player choice in silas_check_amulet_pieces leading here
        "questInProgress": "SILAS_SUNKEN_STAR_AMULET_QUEST",
        "questObjectiveCompleted": "obtain_humming_pearl",
        "hasItems": ["artifact_piece_1_obsidian", "artifact_piece_2_coral", "artifact_piece_3_pearl"]
      },
      "playerChoices": [
        {
          "text": "Yes, I'm ready. Let's do this.",
          "effects": [{"type": "TRIGGER_PUZZLE", "puzzleId": "ANCIENT_ARTIFACT_ASSEMBLY"}]
        },
        { "text": "I need more time to prepare.", "nextNodeId": "END" }
      ]
    },
    "silas_artifact_assembly_success": {
      "id": "silas_artifact_assembly_success",
      "npcText": "Remarkable! You've done it! The Amulet of the Sunken Star, whole once more! Its power... palpable. You've exceeded my expectations. As per our arrangement, your reward.",
      "playerChoices": [
        { "text": "It was a challenge, but worth it.", "nextNodeId": "silas_discuss_amulet_future" }
      ]
    },
    "silas_discuss_amulet_future": {
      "id": "silas_discuss_amulet_future",
      "npcText": "Indeed. Now, about the amulet itself. It's quite valuable. I could take it off your hands for a handsome sum of additional gold... say, 500 pieces? Or perhaps you'd prefer to keep it? It might have... unforeseen benefits for its owner.",
      "playerChoices": [
        {
          "text": "Sell it to Silas for 500 Gold.",
          "effects": [
            {"type": "REMOVE_ITEM", "itemId": "amulet_sunken_star_complete"},
            {"type": "ADD_RESOURCE", "resource": "gold", "amount": 500}
          ],
          "nextNodeId": "silas_amulet_sold"
        },
        {
          "text": "I think I'll keep the Amulet.",
          "nextNodeId": "silas_amulet_kept"
        }
      ]
    },
    "silas_amulet_sold": {
      "id": "silas_amulet_sold",
      "npcText": "A wise choice. Pleasure doing business with you, as always. The gold is yours. I have... plans for this.",
      "playerChoices": [ {"text": "Farewell, Silas.", "nextNodeId": "END"} ]
    },
    "silas_amulet_kept": {
      "id": "silas_amulet_kept",
      "npcText": "Holding onto it, eh? Bold. May it serve you well... or lead you to interesting places. Do let me know if it reveals any peculiar properties.",
      "playerChoices": [ {"text": "I will. Goodbye, Silas.", "nextNodeId": "END"} ]
    },
    "silas_artifact_assembly_failure": {
      "id": "silas_artifact_assembly_failure",
      "npcText": "A disaster! The pieces have shattered beyond repair! All that effort... wasted. I suppose not everyone has the delicate touch required for such ancient mechanisms. A true pity.",
      "playerChoices": [
        { "text": "A most unfortunate outcome.", "nextNodeId": "END" }
      ]
    },
    "silas_artifact_assembly_skip": {
      "id": "silas_artifact_assembly_skip",
      "npcText": "Suit yourself. Not everyone appreciates the delicate art of artifact restoration. Perhaps you'd be interested in something more... straightforward?",
      "playerChoices": [
        { "text": "Perhaps. What else do you have?", "nextNodeId": "silas_unique_items" }
      ]
    },
    "silas_crimson_marauders_info": {
      "id": "silas_crimson_marauders_info",
      "npcText": "The Crimson Marauders... a dangerous topic. Information about them is costly, and not just in gold. They don't take kindly to prying eyes. What specifically do you wish to know, and what makes it worth my while to tell you?",
      "playerChoices": [
        {
          "text": "I'm after a treasure they hid. I can offer a share.",
          "nextNodeId": "silas_marauder_treasure_share"
        },
        {
          "text": "I need to know their weaknesses, their routines.",
          "nextNodeId": "SILAS_MARAUDER_INTEL_1"
        }
      ]
    },
    "silas_favors": {
      "id": "silas_favors",
      "npcText": "Oh, simple things. Retrieve a misplaced item here, deliver a sensitive message there... Nothing too strenuous for a person of your capabilities, I'm sure. And the rewards can be quite... illuminating.",
      "playerChoices": [
        {
          "text": "I'll keep that in mind.",
          "nextNodeId": "END"
        }
      ]
    },
    "silas_treasure_secrets": {
      "id": "silas_treasure_secrets",
      "npcText": "Treasures, eh? The Caribbean is littered with them. Are we talking about Blackheart's folly, or perhaps something more... recent? Like the legendary hoard of The Crimson Marauders?",
      "playerChoices": [
        {
          "text": "Precisely! The Crimson Marauders' treasure.",
          "nextNodeId": "silas_marauder_treasure_share"
        }
      ]
    },
    "silas_marauder_treasure_share": {
      "id": "silas_marauder_treasure_share",
      "npcText": "A share, you say? Intriguing. That treasure is the stuff of legends, hidden by Captain Varkos himself. They say he left a journal, detailing its location and the traps that guard it. The journal was torn into three parts, each entrusted to a different pirate. One part is rumored to be in the hands of a collector in Port Royal, a man named Elias Thorne. He loves riddles and games of chance.",
      "playerChoices": [
        {
          "text": "Elias Thorne in Port Royal. That's a valuable lead.",
          "nextNodeId": "SILAS_DEEPER_INFO_1"
        },
        {
          "text": "How do you know so much about this?",
          "nextNodeId": "SILAS_DEEPER_INFO_2"
        }
      ]
    },
    "SILAS_MARAUDER_INTEL_1": {
      "id": "SILAS_MARAUDER_INTEL_1",
      "npcText": "Their weakness? Greed, like any pirate. Their routine? They resupply at a smugglers' cove on Isla Escondida, usually during the new moon. But getting close is suicide without an inside man... or a very clever plan. Information like this isn't free, you know. Perhaps you have something I might want?",
      "playerChoices": [
        {
          "text": "What are you looking for?",
          "nextNodeId": "END"
        }
      ]
    },
    "SILAS_DEEPER_INFO_1": {
      "id": "SILAS_DEEPER_INFO_1",
      "npcText": "Indeed. Thorne is paranoid but has a weakness for flattery and rare spirits. Should you acquire that piece of the journal, I would be very interested in its contents. Perhaps we could come to a mutually beneficial arrangement for the other pieces?",
      "playerChoices": [
        {
          "text": "We'll see. Thanks for the information, Silas.",
          "nextNodeId": "END"
        }
      ]
    },
    "SILAS_DEEPER_INFO_2": {
      "id": "SILAS_DEEPER_INFO_2",
      "npcText": "My dear friend, it's my business to know things. Information is the true currency in these waters. And I always have an ear to the ground... or a spy in the right tavern. Let's just say the Crimson Marauders have made many enemies, and some of them talk to me.",
      "playerChoices": [
        {
          "text": "I see. Your discretion is appreciated.",
          "nextNodeId": "END"
        }
      ]
    }
  },
  "npc_elena_rostova": {
    "elena_rostova_start": {
      "id": "elena_rostova_start",
      "npcText": "Welcome aboard 'The Sea's Whisper'. I'm Captain Elena Rostova. What brings you to my ship?",
      "playerChoices": [
        {
          "text": "I'm looking for work, Captain.",
          "nextNodeId": "elena_rostova_looking_for_work"
        },
        {
          "text": "Just admiring your vessel.",
          "nextNodeId": "elena_rostova_admiring_ship"
        },
        {
          "text": "Are you in need of assistance, Captain?",
          "nextNodeId": "elena_rostova_check_spyglass_quest_availability",
          "condition": {"questStatus": {"questId": "ROSTOVA_LOST_SPYGLASS", "status": "available"}}
        },
        {
          "text": "Captain, about your spyglass...",
          "nextNodeId": "elena_rostova_check_spyglass_return",
          "condition": {
            "questStatus": {"questId": "ROSTOVA_LOST_SPYGLASS", "status": "in_progress"},
            "hasItem": "item_rostova_spyglass"
          }
        },
        {
          "text": "You seem like a capable ally. Would you consider sailing with me?",
          "nextNodeId": "elena_rostova_companion_ask_initial",
          "condition": {"questStatus": {"questId": "ROSTOVA_LOST_SPYGLASS", "status": "completed"}}
        }
      ]
    },
    "elena_rostova_looking_for_work": {
      "id": "elena_rostova_looking_for_work",
      "npcText": "I might have something for a skilled hand. For now, though, I'm a bit preoccupied. My favorite spyglass, a gift from my late father, has gone missing. Without it, I feel blind.",
      "playerChoices": [
        {
          "text": "Perhaps I can help you find it?",
          "nextNodeId": "elena_rostova_start_quest_spyglass",
          "condition": {"questStatus": {"questId": "ROSTOVA_LOST_SPYGLASS", "status": "available"}}
        },
        {
          "text": "A shame. Let me know if anything else comes up.",
          "nextNodeId": "END"
        }
      ]
    },
    "elena_rostova_admiring_ship": {
      "id": "elena_rostova_admiring_ship",
      "npcText": "She's a fine ship, true enough. Fast and sturdy. But a captain's eyes are as important as her keel. Mine are hampered without my spyglass...",
      "playerChoices": [
        {
          "text": "Is there anything I can do to help?",
          "nextNodeId": "elena_rostova_start_quest_spyglass",
          "condition": {"questStatus": {"questId": "ROSTOVA_LOST_SPYGLASS", "status": "available"}}
        },
        {
          "text": "I hope you find it soon.",
          "nextNodeId": "END"
        }
      ]
    },
    "elena_rostova_check_spyglass_quest_availability": {
      "id": "elena_rostova_check_spyglass_quest_availability",
      "npcText": "Assistance? Actually, yes. I've misplaced my spyglass. It's very important to me.",
      "playerChoices": [
        {
          "text": "Tell me about it. Maybe I can find it.",
          "nextNodeId": "elena_rostova_start_quest_spyglass"
        },
        {
          "text": "Sorry, can't help with that now.",
          "nextNodeId": "elena_rostova_start"
        }
      ]
    },
    "elena_rostova_start_quest_spyglass": {
      "id": "elena_rostova_start_quest_spyglass",
      "npcText": "It was a gift from my father, ornate brass with a mother-of-pearl inlay. I last recall having it near the docks, perhaps at the tavern 'The Salty Barnacle' or the harbormaster's office. I need it back before we set sail. Can you help?",
      "playerChoices": [
        {
          "text": "I'll help you find it, Captain.",
          "nextNodeId": "elena_rostova_accept_spyglass_quest"
        },
        {
          "text": "Sorry, I don't have time for that right now.",
          "nextNodeId": "elena_rostova_decline_spyglass_quest"
        }
      ]
    },
    "elena_rostova_accept_spyglass_quest": {
      "id": "elena_rostova_accept_spyglass_quest",
      "npcText": "Thank you! Your help is greatly appreciated. Check around the docks, the tavern, and the harbormaster. It must be somewhere there. It's quite distinctive.",
      "effects": [{"type": "START_QUEST", "questId": "ROSTOVA_LOST_SPYGLASS"}],
      "playerChoices": [
        {
          "text": "I'll let you know what I find.",
          "nextNodeId": "END"
        }
      ]
    },
    "elena_rostova_decline_spyglass_quest": {
      "id": "elena_rostova_decline_spyglass_quest",
      "npcText": "A pity. Well, I suppose I'll have to search myself when I get a moment. Safe travels.",
      "playerChoices": [
        {
          "text": "Goodbye, Captain.",
          "nextNodeId": "END"
        }
      ]
    },
    "elena_rostova_check_spyglass_return": {
      "id": "elena_rostova_check_spyglass_return",
      "npcText": "You mentioned my spyglass... have you found it?",
      "playerChoices": [
        {
          "text": "Yes, Captain! Here it is.",
          "nextNodeId": "elena_rostova_return_spyglass"
        },
        {
          "text": "Not yet, still searching.",
          "nextNodeId": "END"
        }
      ]
    },
    "elena_rostova_return_spyglass": {
      "id": "elena_rostova_return_spyglass",
      "npcText": "My spyglass! You found it! Oh, thank you, you don't know how much this means to me. Please, take this for your troubles. You've earned it.",
      "effects": [
        {"type": "COMPLETE_QUEST", "questId": "ROSTOVA_LOST_SPYGLASS"},
        {"type": "REMOVE_ITEM", "itemId": "item_rostova_spyglass"},
        {"type": "ADD_ITEM", "itemId": "item_gold_coins_medium"},
        {"type": "ADD_XP", "amount": 50},
        {"type": "ADD_STANDING", "npcId": "npc_elena_rostova", "amount": 2}
      ],
      "playerChoices": [
        {
          "text": "Glad I could help, Captain.",
          "nextNodeId": "elena_rostova_post_quest_chat"
        }
      ]
    },
    "elena_rostova_post_quest_chat": {
      "id": "elena_rostova_post_quest_chat",
      "npcText": "You've proven yourself reliable and resourceful. If you're ever looking for a trustworthy captain, or perhaps an ally on your own voyages, don't hesitate to speak with me again.",
      "playerChoices": [
        {
          "text": "Thank you, Captain. I'll remember that.",
          "nextNodeId": "elena_rostova_start"
        },
        {
          "text": "Actually, about sailing together...",
          "nextNodeId": "elena_rostova_companion_ask_initial"
        }
      ]
    },
    "elena_rostova_companion_ask_initial": {
      "id": "elena_rostova_companion_ask_initial",
      "npcText": "Sail with you? Hmm. I admit, your assistance with my spyglass was invaluable, and you carry yourself with a certain... competence. What exactly are you proposing?",
      "playerChoices": [
        {
          "text": "I'm gathering a crew for my ship. I'd be honored to have you.",
          "nextNodeId": "elena_rostova_recruit_companion_offer"
        },
        {
          "text": "Just an idea. Perhaps another time.",
          "nextNodeId": "elena_rostova_decline_companionship_initial"
        }
      ]
    },
    "elena_rostova_recruit_companion_offer": {
      "id": "elena_rostova_recruit_companion_offer",
      "npcText": "Join your crew... It's a significant decision. My own ship and crew would need a capable temporary commander. But, the allure of new adventures under a different flag... it has a certain appeal. And your actions speak well of your character. ",
      "playerChoices": [
        {
          "text": "You'd be a great asset, Captain. We'd achieve much together.",
          "nextNodeId": "elena_rostova_accept_companionship"
        },
        {
          "text": "I understand it's a big step. No pressure.",
          "nextNodeId": "elena_rostova_decline_companionship"
        }
      ]
    },
    "elena_rostova_accept_companionship": {
      "id": "elena_rostova_accept_companionship",
      "npcText": "Very well. For a time, I, Captain Elena Rostova, will sail under your command. May our voyages be prosperous and our names sung by bards across the seas! I'll make arrangements for 'The Sea's Whisper'.",
      "effects": [{"type": "RECRUIT_COMPANION", "companionId": "npc_elena_rostova"}],
      "playerChoices": [
        {
          "text": "Welcome aboard, Captain Rostova!",
          "nextNodeId": "END"
        }
      ]
    },
    "elena_rostova_decline_companionship": {
      "id": "elena_rostova_decline_companionship",
      "npcText": "Perhaps you're right. The sea demands certainty. For now, I have my own responsibilities. But I won't forget your offer, or your help. Fair winds to you.",
      "playerChoices": [
        {
          "text": "And to you, Captain.",
          "nextNodeId": "END"
        }
      ]
    },
    "elena_rostova_decline_companionship_initial": {
      "id": "elena_rostova_decline_companionship_initial",
      "npcText": "As you wish. My spyglass is keen, and I'll keep an eye on your progress. Perhaps our paths will cross more formally in the future.",
      "playerChoices": [
        {
          "text": "I hope so, Captain.",
          "nextNodeId": "END"
        }
      ]
    },
    "rostova_spyglass_puzzle_success_dialogue": {
      "id": "rostova_spyglass_puzzle_success_dialogue",
      "npcText": "Aha! Tucked away under a loose floorboard, you spot it - Captain Rostova's distinctive spyglass! It seems to be in good condition.",
      "playerChoices": [
        {
          "text": "Excellent. Now to return it to her.",
          "nextNodeId": "END"
        }
      ]
    },
    "rostova_spyglass_puzzle_failure_dialogue": {
      "id": "rostova_spyglass_puzzle_failure_dialogue",
      "npcText": "Despite your best efforts, you can't seem to locate the spyglass here. Perhaps it's truly lost, or somewhere else entirely.",
      "playerChoices": [
        {
          "text": "Unfortunate.",
          "nextNodeId": "END"
        }
      ]
    },
    "rostova_spyglass_puzzle_skip_dialogue": {
      "id": "rostova_spyglass_puzzle_skip_dialogue",
      "npcText": "You decide to stop searching for now. The clutter is overwhelming.",
      "playerChoices": [
        {
          "text": "Maybe later.",
          "nextNodeId": "END"
        }
      ]
    }
  },
  "npc_esmeralda_valdez": {
    "esmeralda_start": {
      "id": "esmeralda_start",
      "npcText": "The tides have brought you to my shore, seeker. Your aura is... turbulent. What visions do you chase, or what shadows flee from?",
      "playerChoices": [
        {
          "text": "Who are you? How do you know I'm a 'seeker'?",
          "nextNodeId": "esmeralda_who_are_you"
        },
        {
          "text": "I seek answers about a hidden treasure.",
          "nextNodeId": "esmeralda_treasure_query"
        },
        {
          "text": "I'm just exploring. This is an interesting cove.",
          "nextNodeId": "END"
        }
      ]
    },
    "esmeralda_who_are_you": {
      "id": "esmeralda_who_are_you",
      "npcText": "I am Esmeralda. The currents whisper secrets to me, and the stars map out the paths of fate. I see the hunger in your spirit. It is an old hunger, one that has led many to glory, and many more to ruin.",
      "playerChoices": [
        {
          "text": "Can you see my fate?",
          "nextNodeId": "esmeralda_see_fate"
        },
        {
          "text": "I make my own fate.",
          "nextNodeId": "END"
        },
        {
          "text": "Offer me a riddle, Seer.",
          "nextNodeId": "esmeralda_moon_riddle_prompt"
        }
      ]
    },
    "esmeralda_moon_riddle_prompt": {
      "id": "esmeralda_moon_riddle_prompt",
      "npcText": "Ah, a mind eager for mysteries! Very well. Listen closely... (Esmeralda poses her riddle about the moon)",
      "playerChoices": [
        {
          "text": "I am ready to answer.",
          "effects": [
            {"type": "TRIGGER_PUZZLE", "puzzleId": "ESMERALDA_MOON_RIDDLE"},
            {"type": "START_QUEST", "questId": "ESMERALDA_INSIGHT_QUEST"}
          ]
        },
        {
          "text": "My mind is clouded today, another time perhaps.",
          "nextNodeId": "esmeralda_who_are_you"
        }
      ]
    },
    "esmeralda_moon_riddle_success": {
      "id": "esmeralda_moon_riddle_success",
      "npcText": "Impressive, child. Your spirit is keen, like the sliver of a new moon. The path you seek begins to clear. The tides of fortune favor the wise. With this clarity, perhaps you are ready to understand more about the whispers of the deep.",
      "playerChoices": [
        {
          "text": "What whispers do you speak of, Esmeralda?",
          "nextNodeId": "esmeralda_deeper_lore_1"
        }
      ]
    },
    "esmeralda_moon_riddle_failure": {
      "id": "esmeralda_moon_riddle_failure",
      "npcText": "The answer eludes you, like a ship vanishing into fog. Do not despair. The sea has many mysteries, and not all are revealed at once. Ponder it, and perhaps the answer will surface.",
      "playerChoices": [
        {"text": "I will think on it.", "nextNodeId": "END"}
      ]
    },
    "esmeralda_moon_riddle_skip": {
      "id": "esmeralda_moon_riddle_skip",
      "npcText": "The currents of the mind must flow freely. If the way is blocked, seek another channel. We shall speak of other things.",
      "playerChoices": [
        {"text": "Very well.", "nextNodeId": "esmeralda_who_are_you"}
      ]
    },
    "esmeralda_treasure_query": {
      "id": "esmeralda_treasure_query",
      "npcText": "A treasure, you say? Many treasures lie beneath these waves, stained with blood and regret. Are you speaking of the gold that glitters, or the truth that lies buried even deeper? The Crimson Marauders' legacy, perhaps?",
      "playerChoices": [
        {
          "text": "Yes! The treasure hidden by The Crimson Marauders.",
          "nextNodeId": "esmeralda_crimson_treasure"
        },
        {
          "text": "What do you mean by 'truth that lies buried deeper'?",
          "nextNodeId": "ESMERALDA_TRUTH_1"
        }
      ]
    },
    "esmeralda_see_fate": {
      "id": "esmeralda_see_fate",
      "npcText": "The threads of fate are tangled, ever-shifting. I can show you glimpses, possibilities... but the final weave is yours to choose. For a price, of course. The spirits demand their due.",
      "playerChoices": [
        {
          "text": "What kind of price?",
          "nextNodeId": "ESMERALDA_PRICE_1"
        },
        {
          "text": "I'd rather not know.",
          "nextNodeId": "END"
        }
      ]
    },
    "esmeralda_crimson_treasure": {
      "id": "esmeralda_crimson_treasure",
      "npcText": "The Marauders' hoard... a scar on the heart of the sea. It was stolen by treachery, hidden in pride, and cursed by despair. To find it, you must understand the heart of its first captain, Varkos – a man torn between shadow and light. One of his most trusted men, a navigator named Finnigan, was betrayed. His spirit lingers near 'The Sunken Star,' where he met his end. He holds a key, not of metal, but of memory.",
      "playerChoices": [
        {
          "text": "'The Sunken Star'? What is that?",
          "nextNodeId": "ESMERALDA_RIDDLE_1"
        },
        {
          "text": "How can a spirit hold a key?",
          "nextNodeId": "ESMERALDA_RIDDLE_2"
        }
      ]
    },
    "ESMERALDA_TRUTH_1": {
      "id": "ESMERALDA_TRUTH_1",
      "npcText": "All that glitters is not gold, seeker. Some treasures are knowledge, some are vengeance, some are peace. The Crimson Marauders stole more than just jewels and coin. They stole lives, futures... these too leave ghosts.",
      "playerChoices": [
        {
          "text": "You speak in riddles, Esmeralda.",
          "nextNodeId": "esmeralda_crimson_treasure"
        }
      ]
    },
    "ESMERALDA_PRICE_1": {
      "id": "ESMERALDA_PRICE_1",
      "npcText": "The spirits favor offerings of rarity. A trinket lost to time, a memory willingly given, a promise of a future deed... What can you offer that speaks to the unseen world?",
      "playerChoices": [
        {
          "text": "I have a strange coin I found...",
          "nextNodeId": "END"
        },
        {
          "text": "I need to think about this.",
          "nextNodeId": "END"
        }
      ]
    },
    "esmeralda_deeper_lore_1": {
      "id": "esmeralda_deeper_lore_1",
      "npcText": "The currents speak of an ancient power stirring, a relic of the old gods tied to the very heart of these islands. They say it was shattered, its pieces scattered by a forgotten cataclysm. One who is wise and observant might perceive its echoes.",
      "playerChoices": [
        {
          "text": "A shattered relic? That sounds significant.",
          "nextNodeId": "esmeralda_deeper_lore_2"
        },
        {
          "text": "Thank you for this insight, Esmeralda.",
          "nextNodeId": "END"
        }
      ]
    },
    "esmeralda_deeper_lore_2": {
      "id": "esmeralda_deeper_lore_2",
      "npcText": "Indeed. Keep your eyes open, seeker. The world is older and more mysterious than most pirates dream. What you have learned today is but a drop in the ocean of knowledge. Seek wisdom in all things.",
      "playerChoices": [
        {
          "text": "I will. Farewell for now.",
          "nextNodeId": "END"
        }
      ]
    }
  },
  "npc_mysterious_woman": {
    "mysterious_start": {
      "id": "mysterious_start",
      "npcText": "The lagoon keeps many secrets, whispered on the tides. What is it that you truly seek here, traveler?",
      "playerChoices": [
        {
          "text": "Who are you, if I may ask?",
          "nextNodeId": "mysterious_who"
        },
        {
          "text": "Just admiring the tranquility of this place.",
          "nextNodeId": "mysterious_admire"
        },
        {
          "text": "What kind of secrets does this lagoon hold?",
          "nextNodeId": "mysterious_lagoon_secrets"
        }
      ]
    },
    "mysterious_who": {
      "id": "mysterious_who",
      "npcText": "I am but a guardian of this place, a keeper of its balance. The waters here are ancient, and they remember all who pass. Be respectful of their depths.",
      "playerChoices": [
        {
          "text": "I understand. I mean no harm.",
          "nextNodeId": "END"
        },
        {
          "text": "What does it mean to 'keep its balance'?",
          "nextNodeId": "mysterious_balance_explained"
        }
      ]
    },
    "mysterious_admire": {
      "id": "mysterious_admire",
      "npcText": "Indeed, it is a rare sanctuary in these troubled seas. May you find a moment of peace here. But remember, even the calmest waters can hide sharp rocks.",
      "playerChoices": [
        {
          "text": "I'll keep that in mind.",
          "nextNodeId": "END"
        }
      ]
    },
    "mysterious_lagoon_secrets": {
      "id": "mysterious_lagoon_secrets",
      "npcText": "The lagoon remembers the songs of the ancient mariners, the whispers of forgotten gods, and the dreams of sleeping leviathans. Its waters can heal, or they can deceive. Approach with respect.",
      "playerChoices": [
        {
          "text": "I will be respectful.",
          "nextNodeId": "END"
        }
      ]
    },
    "mysterious_balance_explained": {
      "id": "mysterious_balance_explained",
      "npcText": "Life and decay, light and shadow, the seen and the unseen... all must flow in harmony here. I am merely a conduit, ensuring the tides of power do not overwhelm this sanctuary.",
      "playerChoices": [
        {
          "text": "A vital role, it seems.",
          "nextNodeId": "END"
        }
      ]
    }
  },
  "npc_shady_merchant": {
    "shady_start": {
      "id": "shady_start",
      "npcText": "Psst! Over here, friend. Looking for something... special? Something not found in your everyday market stall?",
      "playerChoices": [
        {
          "text": "What kind of 'special' items are we talking about?",
          "nextNodeId": "shady_items_query"
        },
        {
          "text": "No thanks, I'm just browsing.",
          "nextNodeId": "shady_browsing"
        },
        {
          "text": "You look like you've seen a few things. Ever have a deal go sour?",
          "nextNodeId": "shady_deal_gone_sour"
        }
      ]
    },
    "shady_items_query": {
      "id": "shady_items_query",
      "npcText": "Ah, a connoisseur! I have trinkets from forgotten isles, maps that lead to... interesting places, and curiosities that would make a king jealous. Of course, such things have their price.",
      "playerChoices": [
        {
          "text": "Maybe another time. My coin purse is light.",
          "nextNodeId": "END"
        },
        {
          "text": "(Lie) I'm not afraid of a high price for true value.",
          "nextNodeId": "shady_lie_price"
        },
        {
          "text": "I'm looking for something... powerful. Perhaps even cursed?",
          "nextNodeId": "shady_cursed_relics"
        }
      ]
    },
    "shady_browsing": {
      "id": "shady_browsing",
      "npcText": "Suit yourself. But when the ordinary fails to satisfy, remember where to find me. Heh heh.",
      "playerChoices": [
        {
          "text": "I will.",
          "nextNodeId": "END"
        }
      ]
    },
    "shady_lie_price": {
      "id": "shady_lie_price",
      "npcText": "Is that so? Well, perhaps we can do business. But not here, not now. Too many eyes. Find me when the moon is high, and the shadows are long. We'll talk then.",
      "playerChoices": [
        {
          "text": "Intriguing. I might just do that.",
          "nextNodeId": "END"
        }
      ]
    },
    "shady_cursed_relics": {
      "id": "shady_cursed_relics",
      "npcText": "Hah! A taste for the forbidden, eh? Cursed items... they offer great power, but always at a steep price, often more than just coin. I might know a fellow who dabbles... for the right introduction fee, of course.",
      "playerChoices": [
        {
          "text": "Interesting. I'll consider it.",
          "nextNodeId": "END"
        }
      ]
    },
    "shady_deal_gone_sour": {
      "id": "shady_deal_gone_sour",
      "npcText": "Sour? Heh, more like rotten to the core! Once tried to sell a 'genuine' mermaid's tear to a rather dim-witted pirate captain. Turned out his first mate was a marine biologist in a past life. Nearly ended up as fish food. Discretion, my friend, is the better part of profit.",
      "playerChoices": [
        {
          "text": "A valuable lesson, indeed.",
          "nextNodeId": "END"
        }
      ]
    }
  },
  "_ALIGNMENT_CONFLICTS": {
    "ALIGNMENT_CONFLICT_NODE": {
      "id": "ALIGNMENT_CONFLICT_NODE",
      "npcText": "Our beliefs are too different. There is nothing for us to discuss.",
      "playerChoices": [
        {
          "text": "Perhaps you are right.",
          "nextNodeId": "END"
        }
      ]
    }
  }
}
